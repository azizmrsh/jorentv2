# ๐ง ุญู ูุดููุฉ ุชูุฑุงุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู - AccResource

## ๐ฏ ุงููุดููุฉ
ูุงู ูุธูุฑ ุฎุทุฃ `UniqueConstraintViolationException` ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุจููุณ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูููุฌูุฏ ูุณุจูุงู.

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุถุงูุฉ ุงูุชุญูู ูู ูููุฐุฌ Filament
ุชู ุชุญุฏูุซ ุญูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูู `AccResource.php` ููุดูู:

```php
Forms\Components\TextInput::make('email')
    ->label('Email')
    ->email()
    ->maxLength(255)
    ->required()
    ->unique(table: 'accs', column: 'email', ignoreRecord: true)
    ->validationMessages([
        'unique' => 'ูุฐุง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุณุชุฎุฏู ูุณุจูุงู. ูุฑุฌู ุงุฎุชูุงุฑ ุจุฑูุฏ ุขุฎุฑ.',
        'email' => 'ูุฑุฌู ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ.',
        'required' => 'ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจ.',
    ])
```

### 2. ุชุญุณูู ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ
ูู `CreateAcc.php`:
- ุฅุถุงูุฉ `beforeCreate()` ููุชุญูู ูู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ
- ุฑุณุงุฆู ุชูุจูู ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ุฅููุงู ุงูุนูููุฉ ูู ุญุงูุฉ ูุฌูุฏ ุชูุฑุงุฑ

### 3. ุชุญุณูู ุตูุญุฉ ุชุนุฏูู ุงูุญุณุงุจ  
ูู `EditAcc.php`:
- ุฅุถุงูุฉ `beforeSave()` ููุชุญูู ุฃุซูุงุก ุงูุชุนุฏูู
- ุชุฌุงูู ุงูุณุฌู ุงูุญุงูู ุนูุฏ ุงูุชุญูู ูู ุงูุชูุฑุงุฑ
- ุฑุณุงุฆู ุชุฃููุฏ ููุชุญุฏูุซ ุงููุงุฌุญ

### 4. ุฃุฏุงุฉ ุชูุธูู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ
ุชู ุฅูุดุงุก `CleanDuplicateEmails` command ููุชุนุงูู ูุน ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ุงูููุฌูุฏุฉ:

```bash
php artisan accs:clean-duplicate-emails
```

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู:
1. ุชุดุบูู ุฃูุฑ ุงูุชูุธูู (ุฅุฐุง ูุงูุช ููุงู ุจูุงูุงุช ููุฑุฑุฉ):
   ```bash
   php artisan accs:clean-duplicate-emails
   ```

2. ุงุฎุชุจุงุฑ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุจููุณ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ูููุณุชุฎุฏููู:
- ุนูุฏ ุฅุฏุฎุงู ุจุฑูุฏ ููุฑุฑุ ุณุชุธูุฑ ุฑุณุงูุฉ ูุงุถุญุฉ: "ูุฐุง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุณุชุฎุฏู ูุณุจูุงู"
- ูู ูุชู ุญูุธ ุงูุจูุงูุงุช ุงูููุฑุฑุฉ
- ูููู ุงููุชุงุจุนุฉ ุจุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุขุฎุฑ

## ๐ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### โ ุงูุชุญูู ุงููุชูุฏู
- ูุญุต ูู ุงูู Frontend (Filament form validation)
- ูุญุต ูู ุงูู Backend (PHP methods)
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูุจุงููุบุฉ ุงูุนุฑุจูุฉ

### โ ุญูุงูุฉ ุดุงููุฉ
- ุญูุงูุฉ ุฃุซูุงุก ุงูุฅูุดุงุก (`beforeCreate`)
- ุญูุงูุฉ ุฃุซูุงุก ุงูุชุนุฏูู (`beforeSave`)
- ุชุฌุงูู ุงูุณุฌู ุงูุญุงูู ุนูุฏ ุงูุชุนุฏูู

### โ ุฃุฏูุงุช ุงูุตูุงูุฉ
- ุฃูุฑ command ูุชูุธูู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ
- ุฅุธูุงุฑ ุชูุงุตูู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ูุจู ุงูุญุฐู
- ุฎูุงุฑ ุงูุชุฃููุฏ ูุจู ุงูุญุฐู

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

1. **AccResource.php** - ุชุญุฏูุซ validation ููู email field
2. **CreateAcc.php** - ุฅุถุงูุฉ ุญูุงูุฉ ููุฅูุดุงุก
3. **EditAcc.php** - ุฅุถุงูุฉ ุญูุงูุฉ ููุชุนุฏูู  
4. **CleanDuplicateEmails.php** - ุฃุฏุงุฉ ุชูุธูู ุงูุจูุงูุงุช

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ูุง ูุฒูุฏ ูู ุฃุฎุทุงุก UniqueConstraintViolationException**  
โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ**  
โ **ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ**  
โ **ุฃุฏูุงุช ุตูุงูุฉ ููุจูุงูุงุช ุงูููุฑุฑุฉ**

---
**ุงูุชุงุฑูุฎ**: ูุงูู 2025  
**ุงูุญุงูุฉ**: ููุญู โ  
**ุงููุทูุฑ**: GitHub Copilot
