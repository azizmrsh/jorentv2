# ๐ฏ ูุญุต ูุชูุซูู ูุธุงู ุงูุฏูุนุงุช (Payment System) - ููุชูู โ

## ๐ ุชุงุฑูุฎ ุงููุญุต
**ุงูุชุงุฑูุฎ:** 1 ููููู 2025  
**ุงูุญุงูุฉ:** ููุชูู ูููุญุฏุซ โ

## ๐ ููุฎุต ุงููุญุต

### โ ุงูููุงุฐุฌ (Models)

#### 1. Payment Model (`app/Models/Payment.php`)
- โ **ุงูุนูุงูุงุช ุตุญูุญุฉ:**
  - `belongsTo(Contract1::class)` - ุงูุนูุงูุฉ ูุน ุงูุนูุฏ
  - `hasOneThrough(Tenant::class)` - ุงูุนูุงูุฉ ูุน ุงููุณุชุฃุฌุฑ ุนุจุฑ ุงูุนูุฏ
- โ **ุงูุญููู ุงููุณููุญ ุชุนุจุฆุชูุง:**
  - `contract_id`, `amount`, `payment_date`, `payment_method`, `reference_number`, `notes`
- โ **ุงูุชุญูููุงุช (Casts):**
  - `payment_date` => `date`
  - `amount` => `decimal:2`
- โ **ุฏูุงู ูุณุงุนุฏุฉ:**
  - `getFormattedAmountAttribute()` - ุชูุณูู ุงููุจูุบ ุจุงูุนุฑุจูุฉ
  - `getPaymentMethodArabicAttribute()` - ุชุฑุฌูุฉ ุทุฑููุฉ ุงูุฏูุน ููุนุฑุจูุฉ
  - `scopeDateRange()` - ูุทุงู ุชุงุฑูุฎู ููุงุณุชุนูุงูุงุช
  - `scopeByMethod()` - ููุชุฑุฉ ุญุณุจ ุทุฑููุฉ ุงูุฏูุน

#### 2. Tenant Model (`app/Models/Tenant.php`)
- โ **ุนูุงูุฉ ุงูุฏูุนุงุช ูุญุฏุซุฉ:**
  - ุงุณุชุฎุฏุงู `hasManyThrough` ุจุฏูุงู ูู `hasMany`
  - ุฑุจุท ุตุญูุญ ุนุจุฑ ุงูุนููุฏ: `Tenant -> Contract1 -> Payment`

#### 3. Contract1 Model (`app/Models/Contract1.php`)
- โ **ุนูุงูุฉ ุงูุฏูุนุงุช ููุฌูุฏุฉ:**
  - `hasMany(Payment::class)`

### โ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database)

#### Migration (`2025_05_23_100540_create_payments_table.php`)
- โ **ูููู ุงูุฌุฏูู ุตุญูุญ:**
  - `id` - Primary Key
  - `contract_id` - Foreign Key ุฅูู ุฌุฏูู contract1s
  - `amount` - ูุจูุบ ุงูุฏูุนุฉ (decimal 10,2)
  - `payment_date` - ุชุงุฑูุฎ ุงูุฏูุน
  - `payment_method` - ุทุฑููุฉ ุงูุฏูุน (enum)
  - `reference_number` - ุงูุฑูู ุงููุฑุฌุนู (nullable)
  - `notes` - ููุงุญุธุงุช (nullable)
  - `timestamps` - ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ

### โ ูุงุฌูุงุช Filament

#### 1. PaymentResource (`app/Filament/Resources/PaymentResource.php`)
- โ **ุงููููุฐุฌ (Form):**
  - ุงุฎุชูุงุฑ ุงูุนูุฏ ูุน ุนุฑุถ ูุนูููุงุช ุงููุณุชุฃุฌุฑ
  - ุฅุฏุฎุงู ุงููุจูุบ ุจุงูุฏููุงุฑ ุงูุฃุฑุฏูู
  - ุงุฎุชูุงุฑ ุชุงุฑูุฎ ุงูุฏูุน
  - ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน (ููุฏุงูุ ุชุญููู ุจูููุ ูุญูุธุฉุ ูููู)
  - ุฑูู ูุฑุฌุนู ุงุฎุชูุงุฑู
  - ููุงุญุธุงุช

- โ **ุงูุฌุฏูู (Table):**
  - ุนุฑุถ ุฌููุน ุงููุนูููุงุช ุจุงูุนุฑุจูุฉ
  - ููุงุชุฑ ูุชูุฏูุฉ (ุญุณุจ ุงูุนูุฏุ ุทุฑููุฉ ุงูุฏูุนุ ุงูุชุงุฑูุฎ)
  - ุฅููุงููุฉ ุงูุชุตุฏูุฑ
  - ุฃููุงู ูููุฒุฉ ูุทุฑู ุงูุฏูุน ุงููุฎุชููุฉ

#### 2. PaymentsRelationManager (`TenantResource/RelationManagers/`)
- โ **ููุญุฏุซ ูููุตุญุญ:**
  - ุฑุจุท ุตุญูุญ ุจุฏูุนุงุช ุงููุณุชุฃุฌุฑ ุนุจุฑ ุงูุนููุฏ
  - ุนุฑุถ ูุนูููุงุช ุงููุญุฏุฉ ูุงูุนูุฏ
  - ููุงุฐุฌ ุฅุถุงูุฉ ูุชุนุฏูู ูุญุณูุฉ
  - ููุงุชุฑ ุญุณุจ ุทุฑููุฉ ุงูุฏูุน ููุทุงู ุงูุชุงุฑูุฎ

### โ ุงูููุฒุงุช ุงููุญุณูุฉ

#### 1. ูุงุฌูุฉ ุงููุณุชุฎุฏู
- ๐จ **ุนุฑุถ ุจุงูุนุฑุจูุฉ:** ุฌููุน ุงูุชุณููุงุช ูุงูููุงุฆู ูุชุฑุฌูุฉ
- ๐ฐ **ุงูุนููุฉ:** ุฏููุงุฑ ุฃุฑุฏูู (JOD) ูู ุฌููุน ุฃูุญุงุก ุงููุธุงู
- ๐ฏ **ุฃููุงู ูููุฒุฉ:** 
  - ููุฏุงู (ุฃุฎุถุฑ)
  - ุชุญููู ุจููู (ุฃุฒุฑู)
  - ูุญูุธุฉ ุฅููุชุฑูููุฉ (ุจุฑุชูุงูู)
  - ูููู (ุณูุงูู)

#### 2. ุงูููุงุชุฑ ูุงูุจุญุซ
- ๐ **ููุงุชุฑ ุงูุชุงุฑูุฎ:** ูุฐุง ุงูุดูุฑุ ุงููููุ ูุทุงู ูุฎุตุต
- ๐ณ **ุทุฑู ุงูุฏูุน:** ููุชุฑุฉ ุญุณุจ ุทุฑููุฉ ุงูุฏูุน
- ๐ **ุงูุจุญุซ:** ูู ุฃุฑูุงู ุงูุนููุฏ ูุงููุฑุงุฌุน

#### 3. ุงูุชุตุฏูุฑ
- ๐ **ุชุตุฏูุฑ ุดุงูู:** ุฌููุน ุงูุจูุงูุงุช ูุน ุงูุนูุงูุงุช
- ๐ **ุชุตุฏูุฑ ูุญุฏุฏ:** ุงูุฏูุนุงุช ุงููุฎุชุงุฑุฉ ููุท

## ๐ง ุงูุฅุตูุงุญุงุช ุงููููุฌุฒุฉ

### 1. ุฅุตูุงุญ ูููุฐุฌ Payment
- โ **ุงููุดููุฉ:** ุนูุงูุฉ ุฎุงุทุฆุฉ ูุน `Contract::class`
- โ **ุงูุญู:** ุชุตุญูุญ ุฅูู `Contract1::class`
- โ **ุงููุดููุฉ:** ุญููู fillable ููููุฏุฉ
- โ **ุงูุญู:** ุฅุถุงูุฉ ุฌููุน ุงูุญููู ุงููุทููุจุฉ

### 2. ุฅุตูุงุญ ูููุฐุฌ Tenant
- โ **ุงููุดููุฉ:** ุนูุงูุฉ `hasMany` ูุจุงุดุฑุฉ ูุน Payment
- โ **ุงูุญู:** ุงุณุชุฎุฏุงู `hasManyThrough` ุนุจุฑ Contract1

### 3. ุชุญุณูู ูุงุฌูุงุช Filament
- โ **ุงููุดููุฉ:** ุนููุฉ SAR ุจุฏูุงู ูู JOD
- โ **ุงูุญู:** ุชุบููุฑ ุฌููุน ุงููุฑุงุฌุน ุฅูู ุฏููุงุฑ ุฃุฑุฏูู
- โ **ุงููุดููุฉ:** ุชุณููุงุช ุบูุฑ ููุชููุฉ ุจุงูุนุฑุจูุฉ
- โ **ุงูุญู:** ุชุฑุฌูุฉ ุดุงููุฉ ูุฌููุน ุงูุนูุงุตุฑ

## ๐ฏ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

### โ ุงูููููุงุช ุงูุชู ุชุนูู:
1. โ ุฅูุดุงุก ุฏูุนุงุช ุฌุฏูุฏุฉ
2. โ ุนุฑุถ ุฏูุนุงุช ุงููุณุชุฃุฌุฑ
3. โ ุชุนุฏูู ูุญุฐู ุงูุฏูุนุงุช
4. โ ููุชุฑุฉ ูุจุญุซ ูุชูุฏู
5. โ ุชุตุฏูุฑ ุงูุจูุงูุงุช
6. โ ุงูุนูุงูุงุช ุจูู ุงูููุงุฐุฌ
7. โ ูุงุฌูุฉ ุนุฑุจูุฉ ูุงููุฉ

### ๐ ูุณุงุฑุงุช ุงููุธุงู:
- **ุฅุฏุงุฑุฉ ุงูุฏูุนุงุช:** `/admin/payments`
- **ุฏูุนุงุช ุงููุณุชุฃุฌุฑ:** `/admin/tenants/{id}/payments`
- **ุฅูุดุงุก ุฏูุนุฉ:** `/admin/payments/create`

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู:** ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจุตูุงุญูุงุช Filament
2. **ุงูุชุญูู:** ุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุนูุฏ ุงูุฅุฏุฎุงู
3. **ุงูุฃุฏุงุก:** ุงุณุชุฎุฏุงู ุงูุนูุงูุงุช ุงูุตุญูุญุฉ ูุชุญุณูู ุงูุงุณุชุนูุงูุงุช
4. **ุงูุชูุงูู:** ูุชูุงูู ูุน ุฌููุน ุงูููุงุฐุฌ ุงูุฃุฎุฑู ูู ุงููุธุงู

## ๐ ุงูุชูุตูุงุช ูููุณุชูุจู

1. **ุงูุชูุงุฑูุฑ:** ุฅุถุงูุฉ ุชูุงุฑูุฑ ูุงููุฉ ุดูุฑูุฉ/ุณูููุฉ
2. **ุงูุฅุดุนุงุฑุงุช:** ุชูุจููุงุช ููุฏูุนุงุช ุงููุชุฃุฎุฑุฉ
3. **ุงูุฑุจุท ุงูุจููู:** ุฑุจุท ูุน ุงูุจูุงุจุงุช ุงูุจูููุฉ
4. **ุฅูุตุงูุงุช PDF:** ุฅูุดุงุก ุฅูุตุงูุงุช ุฏูุน ูุงุจูุฉ ููุทุจุงุนุฉ

---

**โ ูุธุงู ุงูุฏูุนุงุช ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุงููุงูู!**
